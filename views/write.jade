extends layout

block content
  script(src='https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js')
  script(src='./javascripts/write.js')
  script(src='./javascripts/ckeditor/ckeditor.js')
  script(src='./javascripts/moment.js')
  body#page-top.index(ng-app='myapp')
    .container(ng-controller = "storyController", ng-init="init(#{storyid}, #{sess.userid})", style='margin-top:90px;')
      .row
        .col-lg-10(style='margin-left:100px;')
          div(ng-bind-html='alerts')
          .col-sm-10(style='    margin-bottom: -20px;   margin-left: -15px; color: rgb(114, 131, 115);')
            h4(style='text-transform:none;') Title of new Article
            br                 
          form.form-horizontal( onsubmit='submitstory.disabled = true;')
            .form-group
              .col-sm-10
                input.form-control(required='', name='title', placeholder='Enter title here',  ng-model='story.name')
                input(ng-model= 'storyid' type= 'hidden' value="#{{storyid}}")                
            br                  
            .form-group
              .col-sm-10
                span(style='font-weight: 600;color: rgb(114, 131, 115);') Content
                |                                 
                textarea#editor1.form-control(ck-editor='', name="editor1"  ng-model='story.blog.content' , placeholder='Add a comment ..', style='height:350px;')
                
            |                     
            .form-group
              .col-sm-10
                span(style='font-weight: 600;color: rgb(114, 131, 115);') Excerpt
                |                                 
                textarea.form-control(name='excerpt',  ng-model='story.excerpt'  placeholder='Two line summary', style='height:80px;')
                    
        
        .col-xs-2(style='background-color:#EAF2F4; margin-top:2em; margin-left:-100px')
          h5.text-center Status
          |                     
          .form-group
            .col-sm-12(style='  margin-top: -10px;  margin-left: -13px;')
              span(style='font-size:10px;')
                | Status: 
                span#status(style='font-size: 12px; color: #4F497B;' ng-bind="time")  
              br
              span(style='font-size:10px;')
                | URL: 
                span#status(style='font-size: 12px; color: #4F497B;' ng-bind="url")
              br
              span(style='font-size:10px;')
                | For : 
                span#status(style='font-size: 12px; color: #4F497B;' ng-bind="parent")  
            br                            
            br                             
            .form-group
              .col-sm-12
                a.btn.btn-primary.btn-sm( target="_blank" href=".{{url}}"  style='  text-transform: none;background-color: rgb(117, 148, 244);border-radius: 4px 4px;border-color: rgb(117, 148, 244);margin-top: 15px;margin-bottom: 10px;margin-left: 35px;') Preview             
        .col-xs-2(style='background-color:#EAF2F4; margin-top:2em; margin-left:-100px')
          h5.text-center Featured Image
          |                      
          form.form-group(action='php/userBackImage.php', style='padding-top:20px;', method='post', enctype='multipart/form-data')
            .form-group
              div(style='margin-left: -13px;')
                input(size="60", required='', type='file', name='myfile', accept='image/*', style='margin-left:0px;')
            |                         
            .form-group
              .col-sm-12.text-center
                button.btn.btn-primary.btn-sm(type='submit', name='submitimg', style='  text-transform: none;background-color:  rgb(47, 207, 85);   border-radius: 4px 4px;border-color: rgb(47, 207, 85);') Upload
        .col-xs-2(style='background-color:#EAF2F4; margin-top:2em; margin-left:-100px')
          h5.text-center Publish
          |                      
          input( type="checkbox", ng-model="commentstatus" ng-checked="commentstatus" )
          span       Allow comments
          br
          br 
          
          .col-sm-6
              button.btn.btn-primary.btn-sm(type='submit', style='text-transform: none; background-color: rgb(47, 207, 85);  border-radius: 4px 4px;  border-color: rgb(47, 207, 85);', name='submitreport' ng-click="savestory()") Save
            |                             
          .col-sm-6
              button.btn.btn-primary.btn-sm(type='submit', name='submitreport', style='  text-transform: none; background-color: rgb(47, 207, 85);  border-radius: 4px 4px;  border-color: rgb(47, 207, 85);') Publish
            | 